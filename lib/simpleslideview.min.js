!function(){var a,b,c,d,e,f,g;a="undefined"!=typeof jQuery&&null!==jQuery?jQuery:Zepto,g=null!=a.scrollTo&&"undefined"!=typeof jQuery&&null!==jQuery?function(b,c,d){return a.scrollTo(b,c,{axis:"y",onAfter:d})}:null!=a.scrollTo?a.scrollTo:function(a,b,c){return window.scrollTo(0,a),c()},c={views:".view",activeView:null,deferOn:!1,duration:a.fx.speeds._default,easing:"undefined"!=typeof Zepto&&null!==Zepto?"ease-out":"swing",useTransformProps:"undefined"!=typeof Zepto&&null!==Zepto,use3D:"undefined"!=typeof Modernizr&&null!==Modernizr&&Modernizr.csstransforms3d,cssPrefix:null!=a.fx.cssPrefix?a.fx.cssPrefix:"",resizeHeight:!0,heightDuration:null,concurrentHeightChange:"undefined"==typeof Zepto||null===Zepto,scrollOn:"start",scrollCallback:g,scrollDuration:null,scrollToContainerTop:!0,concurrentScroll:"undefined"==typeof Zepto||null===Zepto,maintainViewportHeight:null,dataAttrEvent:"click",dataAttr:{push:"pushview",pop:"popview"},classNames:{container:"SimpleSlideView-container",view:"SimpleSlideView-view",activeView:"SimpleSlideView-view-active"},eventNames:{on:"slideViewOn",off:"slideViewOff",beforeOn:"slideViewBeforeOn",beforeOff:"slideViewBeforeOff",deferred:"slideViewDeferred",viewChangeStart:"viewChangeStart",viewChangeEnd:"viewChangeEnd"}},f=function(b,c){var d,e,f,g,h;for(d=a(b),e={},g=0,h=c.length;h>g;g++)f=c[g],e[f]="";return d.css(e)},d=function(b){return null!=a.fn.outerHeight?a(b).outerHeight():a(b).height()},e=function(b){return null!=a.fn.outerWidth?a(b).outerWidth():a(b).width()},b=function(){function b(b,d){this.options=a.extend(!0,{},c,d),null==this.options.heightDuration&&(this.options.heightDuration=this.options.duration),null==this.options.scrollDuration&&(this.options.scrollDuration=this.options.duration),null==this.options.maintainViewportHeight&&(this.options.maintainViewportHeight=this.options.resizeHeight&&this.options.scrollOnStart),null==window.innerHeight&&(this.options.maintainViewportHeight=!1),this.$container=a(b),this.$views="string"==typeof this.options.views?this.$container.find(this.options.views):a(this.options.views),this.$activeView=null!=this.options.activeView?a(this.options.activeView):this.$views.first(),this.isActive=!1,this.options.deferOn?this.$container.trigger(this.options.eventNames.deferred):this.on()}return b.prototype.on=function(){var b=this;if(!this.isActive)return this.$container.trigger(this.options.eventNames.beforeOn),this.queue=[],this.isActive=!0,this.isActive=!0,this.isSliding=!1,this.$container.addClass(this.options.classNames.container),this.$views.addClass(this.options.classNames.view),this.$activeView.addClass(this.options.classNames.activeView),this.$views.not(this.$activeView).css("display","none"),this.options.maintainViewportHeight&&(this.lastViewportHeight=window.innerHeight),null!=this.options.dataAttrEvent&&(this.$container.on(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.push+"]",function(c){var d,e;return d=a(c.currentTarget),e=d.data(b.options.dataAttr.push),e.length||(e=d.attr("href")),e.length?(c.preventDefault(),b.pushView(e)):void 0}),this.$container.on(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.pop+"]",function(c){var d,e;return d=a(c.currentTarget),e=d.data(b.options.dataAttr.pop),e.length||(e=d.attr("href")),e.length?(c.preventDefault(),b.popView(e)):void 0})),this.$container.trigger(this.options.eventNames.on)},b.prototype.off=function(){return this.isActive?(this.$container.trigger(this.options.eventNames.beforeOff),this.queue=[],this.isActive=!1,this.isSliding=!1,this.$container.removeClass(this.options.classNames.container),this.$views.removeClass(this.options.classNames.view+" "+this.options.classNames.activeView),this.$views.css("display",""),this.options.maintainViewportHeight&&a("html").css("min-height",""),null!=this.options.dataAttrEvent&&(this.$container.off(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.push+"]"),this.$container.off(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.pop+"]")),this.$container.trigger(this.options.eventNames.off)):void 0},b.prototype.toggle=function(a){return null==a&&(a=!this.isActive),a?this.on():this.off()},b.prototype._pushOrPop=function(a,b,c){return null==b&&(b=!0),null==c&&(c=!1),"push"===a?b:c},b.prototype.changeView=function(b,c){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this;if(h=a(b),h.length&&h[0]!==this.$activeView[0]){if(j=arguments,this.isSliding||this.queue.length)return this.queue.push(j);if(this.isSliding=!0,this.$container.trigger(this.options.eventNames.viewChangeStart,j),g=this.$activeView.add(h),s={},p={},t=["left","position","top","width"],o=e(this.$container),n={height:d(this.$container),overflow:"hidden",position:"relative",width:"100%"},i={},u={},l={position:"absolute",top:0,width:o},this.options.useTransformProps?(v=this.options.cssPrefix+"transform",x=this.options.use3D?"translate3d(":"translateX(",w=this.options.use3D?", 0, 0)":")",t.push(v),l.left=0,u[v]=x+this._pushOrPop(c,100,-100)+"%"+w,s[v]=x+this._pushOrPop(c,-100,100)+"%"+w,p[v]=x+"0"+w):(i.left=0,u.left=this._pushOrPop(c,o,-1*o),s.left=this._pushOrPop(c,-1*o,o),p.left=0),r=function(){return y.isSliding=!1,y.$container.trigger(y.options.eventNames.viewChangeEnd,j),y.queue.length?y.changeView.apply(y,y.queue.shift()):void 0},q=function(){return f(y.$container,["height","overflow","position","width"]),y.$activeView.removeClass(y.options.classNames.activeView),h.addClass(y.options.classNames.activeView),y.$activeView=h,y.options.scrollCallback&&"end"===y.options.scrollOn?y._scrollToTop(r):r()},k=function(){return y.options.resizeHeight?(y.options.maintainViewportHeight&&window.innerHeight>y.lastViewportHeight&&(y.lastViewportHeight=window.innerHeight,$html.css("min-height",y.lastViewportHeight+top+"px")),y.$container.animate({height:d(h)},y.options.heightDuration,y.options.easing,q)):q()},m=function(){return y.$container.css(n),g.css(l),y.$activeView.css(i),h.css(u),h.show(),y.$activeView.animate(s,y.options.duration,y.options.easing,function(){return f(this,t).hide()}),h.animate(p,y.options.duration,y.options.easing,function(){return f(h,t),y.options.concurrentHeightChange?void 0:k()}),y.options.concurrentHeightChange?k():void 0},this.options.scrollCallback&&"start"===this.options.scrollOn){if(!this.options.concurrentScroll)return this._scrollToTop(m);this._scrollToTop()}return m()}},b.prototype._scrollToTop=function(b){var c;return c=this.options.scrollToContainerTop?this.$container.position().top:0,a(window).scrollTop()>c?this.options.scrollCallback(c,this.options.scrollDuration,b):null!=b?b():void 0},b.prototype.pushView=function(a){return this.changeView(a,"push")},b.prototype.popView=function(a){return this.changeView(a,"pop")},b}(),a.fn.simpleSlideView=function(c,d){return null==c&&(c={}),"object"!=typeof c&&(c={views:c}),"object"==typeof d&&a.extend(c,d),new b(this,c)}}.call(this);