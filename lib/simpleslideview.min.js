"use strict";!function(a,b,c){var d,e,f,g;f=function(b,c){var d,e=c.length,f={},g=a(b);for(d=0;e>d;d++)f[c[d]]="";return g.css(f)},e=function(a,b,c){return b=null===b?!0:b,c=null===c?!1:c,"push"===a?b:c},g=function(){var a=0;return function(b){var c="slideView-";return b.id?b.id:(c+=++a,b.id=c,c)}}(),d=function(){function d(d,e){var f={views:".view",activeView:null,deferOn:!1,duration:null!==a.fx&&null!==a.fx.cssPrefix?a.fx.speeds._default:400,easing:"swing",useTransformProps:!1,use3D:"undefined"!=typeof c&&null!==c&&c.csstransforms3d,cssPrefix:null!==a.fx&&null!==a.fx.cssPrefix?a.fx.cssPrefix:"",resizeHeight:!0,heightDuration:null,concurrentHeightChange:!0,scrollOn:"start",scrollDuration:null,scrollToContainerTop:!0,concurrentScroll:!0,maintainViewportHeight:null,dataAttrEvent:"click",dataAttr:{push:"pushview",pop:"popview",change:"changeView"},classNames:{container:"SimpleSlideView-container",view:"SimpleSlideView-view",activeView:"SimpleSlideView-view-active"}};f.scrollCallback=function(c,d,e){return null!==a.scrollTo?a.scrollTo(c,d,{axis:"y",onAfter:e}):(b.scrollTo(0,c),e?e():!0)},this.options=a.extend(!0,{},f,e),null===this.options.heightDuration&&(this.options.heightDuration=this.options.duration),null===this.options.scrollDuration&&(this.options.scrollDuration=this.options.duration),null===this.options.maintainViewportHeight&&(this.options.maintainViewportHeight=this.options.resizeHeight&&this.options.scrollOnStart&&null!==b.innerHeight),this.$container=a(d),this.namespace=g(this.$container),this.$views="string"==typeof this.options.views?this.$container.find(this.options.views):a(this.options.views),this.$activeView=null!==this.options.activeView?a(this.options.activeView):this.$views.first(),this.isActive=!1,this.options.deferOn?this.$container.trigger("slideViewDeferred."+this.namespace):this.on()}return d.prototype.init=function(a){this.queue=[],this.isActive=a,this.isSliding=!1,this.$container.toggleClass(this.options.classNames.container,a),this.$views.toggleClass(this.options.classNames.view,a),this.$activeView.toggleClass(this.options.classNames.activeView,a)},d.prototype.on=function(){return this.isActive?void 0:(this.$container.trigger("slideViewBeforeOn."+this.namespace),this.init(!0),this.$views.not(this.$activeView).css("display","none"),this.options.maintainViewportHeight&&(this.lastViewportHeight=b.innerHeight),null!==this.options.dataAttrEvent&&(this.$container.on(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.push+"]",a.proxy(this.changeView,this)),this.$container.on(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.pop+"]",a.proxy(this.changeView,this))),this.$container.trigger("slideViewOn."+this.namespace))},d.prototype.off=function(){return this.isActive?(this.$container.trigger("slideViewBeforeOff."+this.namespace),this.init(!1),f(this.$views,["display","min-height"]),null!==this.options.dataAttrEvent&&(this.$container.off(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.push+"]"),this.$container.off(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.pop+"]")),this.$container.trigger("slideViewOff."+this.namespace)):void 0},d.prototype.toggle=function(a){return a=null===a?!this.isActive:a,a?this.on():this.off()},d.prototype.changeView=function(c,d){var g,h,i,j,k,l,m,n,o,p,q=this.$container.outerWidth(),r={};if(c instanceof a.Event){h=a(c.currentTarget),"A"===h.prop("tagName")&&c.preventDefault();for(var s in this.options.dataAttr)i=h.data(this.options.dataAttr[s]),void 0!==i&&(d=s,g=a(i?i:h.attr("href")))}else g=a(c);if(g.length&&g[0]!==this.$activeView[0]){if((null===d||"change"===d)&&(d=this.$views.index(this.$activeView)<this.$views.index(g)?"push":"pop"),this.isSliding||this.queue.length)return this.queue.push(g,d);if(this.isSliding=!0,this.$container.trigger("viewChangeStart."+this.namespace,[g,d]),r={activeCSS:{},bothCSS:{position:"absolute",top:0,width:q},containerCSS:{height:this.$container.outerHeight(),overflow:"hidden",position:"relative",width:"100%"},inAnimProps:{},outAnimProps:{},resetProps:["left","position","top","width"],targetCSS:{}},this.options.useTransformProps?(j=this.options.cssPrefix+"transform",k=this.options.use3D?"translate3d(":"translateX(",l=this.options.use3D?", 0, 0)":")",r.bothCSS.left=0,r.resetProps.push(j),r.targetCSS[j]=k+e(d,100,-100)+"%"+l,r.outAnimProps[j]=k+e(d,-100,100)+"%"+l,r.inAnimProps[j]=k+"0"+l):(r.activeCSS.left=0,r.targetCSS.left=e(d,q,-1*q),r.outAnimProps.left=e(d,-1*q,q),r.inAnimProps.left=0),p=a.proxy(function(){return this.isSliding=!1,this.$container.trigger("viewChangeEnd."+this.namespace,g,d),this.queue.length?this.changeView.apply(this,this.queue.shift()):void 0},this),o=a.proxy(function(){return f(this.$container,["height","overflow","position","width"]),this.$activeView.removeClass(this.options.classNames.activeView),g.addClass(this.options.classNames.activeView),this.$activeView=g,this.options.scrollCallback&&"end"===this.options.scrollOn?this.scrollToTop(p):p()},this),m=a.proxy(function(){return this.options.resizeHeight?(this.options.maintainViewportHeight&&b.innerHeight>this.lastViewportHeight&&(this.lastViewportHeight=b.innerHeight,a("html").css("min-height",this.lastViewportHeight+top+"px")),this.$container.animate({height:g.outerHeight()},this.options.heightDuration,this.options.easing,o)):o()},this),n=a.proxy(function(){return this.$container.css(r.containerCSS),this.$activeView.add(g).css(r.bothCSS),this.$activeView.css(r.activeCSS),g.css(r.targetCSS),g.show(),this.$activeView.animate(r.outAnimProps,this.options.duration,this.options.easing,function(){return f(this,r.resetProps).hide()}),g.animate(r.inAnimProps,this.options.duration,this.options.easing,a.proxy(function(){return f(g,r.resetProps),this.options.concurrentHeightChange?void 0:m()},this)),this.options.concurrentHeightChange?m():void 0},this),this.options.scrollCallback&&"start"===this.options.scrollOn){if(!this.options.concurrentScroll)return this.scrollToTop(n);this.scrollToTop()}return n()}},d.prototype.scrollToTop=function(c){var d=this.options.scrollToContainerTop?this.$container.position().top:0;return a(b).scrollTop()>d?this.options.scrollCallback(d,this.options.scrollDuration,c):void 0!==c?c():void 0},d.prototype.pushView=function(a){return this.changeView(a,"push")},d.prototype.popView=function(a){return this.changeView(a,"pop")},d}(),a.fn.simpleSlideView=function(b,c){var e;return b=b||{},"object"!=typeof b?b={views:b}:a.extend(b,c),e=new d(this,b),this}}(jQuery,this,Modernizr||null);