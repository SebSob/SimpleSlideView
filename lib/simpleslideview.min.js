"use strict";!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b,c,d,e,f,g;d={views:".view",activeView:null,deferOn:!1,duration:null!==a.fx&&null!==a.fx.cssPrefix?a.fx.speeds._default:400,easing:"swing",useTransformProps:!1,use3D:"undefined"!=typeof b&&null!==b&&b.csstransforms3d,cssPrefix:null!==a.fx&&null!==a.fx.cssPrefix?a.fx.cssPrefix:"",resizeHeight:!0,heightDuration:null,concurrentHeightChange:!0,scrollOn:"start",scrollDuration:null,scrollToContainerTop:!0,concurrentScroll:!0,maintainViewportHeight:null,dataAttrEvent:"click",dataAttr:{push:"slideview-push",pop:"slideview-pop",change:"slideview-change"},classNames:{container:"SimpleSlideView-container",view:"SimpleSlideView-view",activeView:"SimpleSlideView-view-active"}},b="undefined"!=typeof window.Modernizr?window.Modernizr:null,d.scrollCallback=function(b,c,d){return null!==a.scrollTo?a.scrollTo(b,c,{axis:"y",onAfter:d}):(window.scrollTo(0,b),d?d():!0)},f=function(b,c){var d,e=c.length,f={};for(d=0;e>d;d++)f[c[d]]="";return a(b).css(f)},e=function(a,b,c){return b=null===b?!0:b,c=null===c?!1:c,"push"===a?b:c},g=function(){var a=0;return function(b){var c="slideView-";return b.id||(c+=++a,b.id=c),b.id}}(),c=function(b,c){var h,i,j,k,l=!1,m=!1,n=0,o=[],p=function(a){o=[],l=a,m=!1,i.toggleClass(this.options.classNames.container,a),j.toggleClass(this.options.classNames.view,a),h.toggleClass(this.options.classNames.activeView,a)},q=function(){var b=a.proxy(s,this),c=k[0];return this.options.resizeHeight?(this.options.maintainViewportHeight&&window.innerHeight>n&&(n=window.innerHeight,a("html").css("min-height",n+top+"px")),i.animate({height:c.outerHeight()},this.options.heightDuration,this.options.easing,b)):b()},r=function(b){return function(){var c=k[0];return i.css(b.containerCSS),h.add(c).css(b.bothCSS),h.css(b.activeCSS),c.css(b.targetCSS),c.show(),h.animate(b.outAnimProps,this.options.duration,this.options.easing,function(){return f(this,b.resetProps).hide()}),c.animate(b.inAnimProps,this.options.duration,this.options.easing,a.proxy(function(){f(c,b.resetProps),this.options.concurrentHeightChange||q.call(this)},this)),this.options.concurrentHeightChange?q.call(this):void 0}},s=function(){var b=k[0];return f(i,["height","overflow","position","width"]),h.removeClass(this.options.classNames.activeView),b.addClass(this.options.classNames.activeView),h=b,this.options.scrollCallback&&"end"===this.options.scrollOn?this.scrollToTop(a.proxy(t,this)):t.call(this)},t=function(){var a=k[0],b=k[1];return m=!1,i.trigger("viewChangeEnd."+this.namespace,a,b),o.length?this.changeView.apply(this,o.shift()):void 0},u=function(){var a,b,c,d=k[1],f=i.outerWidth(),g={activeCSS:{},bothCSS:{position:"absolute",top:0,width:f},containerCSS:{height:i.outerHeight(),overflow:"hidden",position:"relative",width:"100%"},inAnimProps:{},outAnimProps:{},resetProps:["left","position","top","width"],targetCSS:{}};return this.options.useTransformProps?(a=this.options.cssPrefix+"transform",b=this.options.use3D?"translate3d(":"translateX(",c=this.options.use3D?", 0, 0)":")",g.bothCSS.left=0,g.resetProps.push(a),g.targetCSS[a]=b+e(d,100,-100)+"%"+c,g.outAnimProps[a]=b+e(d,-100,100)+"%"+c,g.inAnimProps[a]=b+"0"+c):(g.activeCSS.left=0,g.targetCSS.left=e(d,f,-1*f),g.outAnimProps.left=e(d,-1*f,f),g.inAnimProps.left=0),g};this.on=function(){l||(i.trigger("slideViewBeforeOn."+this.namespace),p.call(this,!0),j.not(h).css("display","none"),this.options.maintainViewportHeight&&(n=window.innerHeight),null!==this.options.dataAttrEvent&&(i.on(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.change+"]",a.proxy(this.changeView,this)),i.on(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.push+"]",a.proxy(this.changeView,this)),i.on(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.pop+"]",a.proxy(this.changeView,this))),i.trigger("slideViewOn."+this.namespace))},this.off=function(){l&&(i.trigger("slideViewBeforeOff."+this.namespace),p.call(this,!1),f(this.$views,["display","min-height"]),null!==this.options.dataAttrEvent&&(i.off(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.push+"]"),i.off(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.pop+"]"),i.off(this.options.dataAttrEvent+"."+this.namespace,"[data-"+this.options.dataAttr.change+"]")),i.trigger("slideViewOff."+this.namespace))},this.toggle=function(a){a=null===a?!l:a,a?this.on():this.off()},this.changeView=function(b,c){var d,e,f,g,l,n;if(b instanceof a.Event){e=a(b.currentTarget),"A"===e.prop("tagName")&&b.preventDefault();for(var p in this.options.dataAttr)f=e.data(this.options.dataAttr[p]),void 0!==f&&(c=p,d=a(f?f:e.attr("href")))}else d=a(b);if(d.length&&d[0]!==h[0]){if((null===c||"change"===c)&&(c=j.index(h)>j.index(d)?"pop":"push"),l=[d,c],m||o.length)return o.push(l);if(k=l,m=!0,i.trigger("viewChangeStart."+this.namespace,[d,c]),n=u.call(this),g=a.proxy(r(n),this),this.options.scrollCallback&&"start"===this.options.scrollOn){if(!this.options.concurrentScroll)return this.scrollToTop(g);this.scrollToTop()}return g()}},this.pushView=function(a){return this.changeView(a,"push")},this.popView=function(a){return this.changeView(a,"pop")},this.scrollToTop=function(b){var c=this.options.scrollToContainerTop?i.position().top:0;return a(window).scrollTop()>c?this.options.scrollCallback(c,this.options.scrollDuration,b):void 0!==b?b():void 0},this.options=a.extend(!0,{},d,c),null===this.options.heightDuration&&(this.options.heightDuration=this.options.duration),null===this.options.scrollDuration&&(this.options.scrollDuration=this.options.duration),null===this.options.maintainViewportHeight&&(this.options.maintainViewportHeight=this.options.resizeHeight&&this.options.scrollOnStart&&null!==window.innerHeight),i=a(b),j="string"==typeof this.options.views?i.find(this.options.views):a(this.options.views),h=null!==this.options.activeView?a(this.options.activeView):j.first(),this.namespace=g(i),this.options.deferOn?i.trigger("slideViewDeferred."+this.namespace):this.on()},a.fn.simpleSlideView=function(b,d){return b=b||{},"object"!=typeof b?b={views:b}:a.extend(b,d),new c(this,b)}});