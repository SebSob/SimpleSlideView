!function(){var a,b,c,d,e,f,g,h;a="undefined"!=typeof jQuery&&null!==jQuery?jQuery:Zepto,c=a(window),b=a("html"),e={views:".view",activeView:null,deferOn:!1,duration:a.fx.speeds._default,easing:"undefined"!=typeof Zepto&&null!==Zepto?"ease-out":"swing",useTransformProps:"undefined"!=typeof Zepto&&null!==Zepto,use3D:"undefined"!=typeof Modernizr&&null!==Modernizr&&Modernizr.csstransforms3d,cssPrefix:null!=a.fx.cssPrefix?a.fx.cssPrefix:"",resizeHeight:!0,heightDuration:null,deferHeightChange:"undefined"!=typeof Zepto&&null!==Zepto,scrollOnStart:null!=a.scrollTo?"scrollTo":!1,scrollToContainerTop:!0,maintainViewportHeight:null,dataAttrEvent:"click",dataAttr:{push:"pushview",pop:"popview"},classNames:{container:"SimpleSlideView-container",view:"SimpleSlideView-view",activeView:"SimpleSlideView-view-active"},eventNames:{on:"slideViewOn",off:"slideViewOff",beforeOn:"slideViewBeforeOn",beforeOff:"slideViewBeforeOff",deferred:"slideViewDeferred",viewChangeStart:"viewChangeStart",viewChangeEnd:"viewChangeEnd"},manipulateHistory:!1,historyLib:"undefined"!=typeof History&&null!==History?History:{},historyChangeEvent:"undefined"!=typeof History&&null!==History?"statechange":null},h=function(b,c){var d,e,f,g,h;for(d=a(b),e={},g=0,h=c.length;h>g;g++)f=c[g],e[f]="";return d.css(e)},f=function(b){return null!=a.fn.outerHeight?a(b).outerHeight():a(b).height()},g=function(b){return null!=a.fn.outerWidth?a(b).outerWidth():a(b).width()},d=function(){function d(b,c){this.options=a.extend(!0,{},e,c),null==this.options.heightDuration&&(this.options.heightDuration=this.options.duration),null==this.options.maintainViewportHeight&&(this.options.maintainViewportHeight=this.options.resizeHeight&&this.options.scrollOnStart),null==window.innerHeight&&(this.options.maintainViewportHeight=!1),this.$container=a(b),this.$views="string"==typeof this.options.views?this.$container.find(this.options.views):a(this.options.views),this.$activeView=null!=this.options.activeView?a(this.options.activeView):this.$views.first(),this.isActive=!1,this.options.deferOn?this.$container.trigger(this.options.eventNames.deferred):this.on()}return d.prototype.on=function(){var b=this;if(!this.isActive)return this.$container.trigger(this.options.eventNames.beforeOn),this.queue=[],this.isActive=!0,this.isSliding=!1,this.$container.addClass(this.options.classNames.container),this.$views.addClass(this.options.classNames.view),this.$activeView.addClass(this.options.classNames.activeView),this.$views.not(this.$activeView).css("display","none"),this.options.maintainViewportHeight&&(this.lastViewportHeight=window.innerHeight),null!=this.options.dataAttrEvent&&(this.$container.on(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.push+"]",function(c){var d,e;return d=a(c.currentTarget),e=d.data(b.options.dataAttr.push),e.length||(e=d.attr("href")),e.length?(c.preventDefault(),b.pushView(e)):void 0}),this.$container.on(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.pop+"]",function(c){var d,e;return d=a(c.currentTarget),e=d.data(b.options.dataAttr.pop),e.length||(e=d.attr("href")),e.length?(c.preventDefault(),b.popView(e)):void 0})),this.options.manipulateHistory&&(this.historyID=0,this.options.historyLib.replaceState({id:this.historyID,viewIndex:this.$views.index(this.$activeView)},null,""),c.on(this.options.historyChangeEvent,function(){var a;return a=b.options.historyLib.getState(),b.changeView(b.$views.get(a.data.viewIndex),a.data.id>b.historyID?"push":"pop",!1),b.historyID=a.data.id})),this.$container.trigger(this.options.eventNames.on)},d.prototype.off=function(){return this.isActive?(this.$container.trigger(this.options.eventNames.beforeOff),this.queue=[],this.isActive=!1,this.isSliding=!1,this.$container.removeClass(this.options.classNames.container),this.$views.removeClass(this.options.classNames.view+" "+this.options.classNames.activeView),this.$views.css("display",""),this.options.maintainViewportHeight&&b.css("min-height",""),null!=this.options.dataAttrEvent&&(this.$container.off(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.push+"]"),this.$container.off(this.options.dataAttrEvent,"[data-"+this.options.dataAttr.pop+"]")),this.options.manipulateHistory&&c.off(this.options.historyChangeEvent),this.$container.trigger(this.options.eventNames.off)):void 0},d.prototype.toggle=function(a){return null==a&&(a=!this.isActive),a?this.on():this.off()},d.prototype.pushOrPop=function(a,b,c){return null==b&&(b=!0),null==c&&(c=!1),"push"===a?b:c},d.prototype.changeView=function(d,e,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w=this;return null==e&&(e="push"),null==i&&(i=this.options.manipulateHistory),m=arguments,this.isSliding||this.queue.length?this.queue.push(m):(k=a(d),k[0]!==this.$activeView[0]?(j=this.$activeView.add(k),this.isSliding=!0,this.$container.trigger(this.options.eventNames.viewChangeStart,m),q={},p={},r=["left","position","top","width"],o=g(this.$container),s=this.options.scrollOnStart&&this.options.scrollToContainerTop?this.$container.position().top:0,this.options.scrollOnStart&&c.scrollTop()>s&&("string"==typeof this.options.scrollOnStart&&null!=a[this.options.scrollOnStart]?a[this.options.scrollOnStart](s,this.options.duration):window.scrollTo(0,s)),this.$container.css({height:f(this.$container),overflow:"hidden",position:"relative",width:"100%"}),j.css({position:"absolute",top:0,width:o}),this.options.useTransformProps?(t=this.options.cssPrefix+"transform",v=this.options.use3D?"translate3d(":"translateX(",u=this.options.use3D?", 0, 0)":")",r.push(t),j.css("left",0),k.css(t,v+this.pushOrPop(e,100,-100)+"%"+u),q[t]=v+this.pushOrPop(e,-100,100)+"%"+u,p[t]=v+"0"+u):(this.$activeView.css("left",0),k.css("left",this.pushOrPop(e,o,-1*o)),q.left=this.pushOrPop(e,-1*o,o),p.left=0),n=function(){return h(w.$container,["height","overflow","position","width"]),w.isSliding=!1,w.$container.trigger(w.options.eventNames.viewChangeEnd,m),w.queue.length?w.changeView.apply(w,w.queue.shift()):void 0},l=function(){return w.options.resizeHeight?(w.options.maintainViewportHeight&&window.innerHeight>w.lastViewportHeight&&(w.lastViewportHeight=window.innerHeight,b.css("min-height",w.lastViewportHeight+s+"px")),w.$container.animate({height:f(k)},w.options.heightDuration,w.options.easing,n)):n()},k.show(),this.$activeView.animate(q,this.options.duration,this.options.easing,function(){return h(this,r).hide()}),k.animate(p,this.options.duration,this.options.easing,function(){return h(k,r),w.options.deferHeightChange?l():void 0}),this.options.deferHeightChange||l(),this.$activeView.removeClass(this.options.classNames.activeView),k.addClass(this.options.classNames.activeView),this.$activeView=k,i?(this.historyID+=1,this.options.historyLib.pushState({id:this.historyID,viewIndex:this.$views.index(this.$activeView)},null,"")):void 0):void 0)},d.prototype.pushView=function(a){return this.changeView(a,"push")},d.prototype.popView=function(a){return this.changeView(a,"pop")},d}(),a.fn.simpleSlideView=function(b,c){return null==b&&(b={}),"object"!=typeof b&&(b={views:b}),"object"==typeof c&&a.extend(b,c),new d(this,b)}}.call(this);